create database oficina;

/*usar um banco de dados*/
use oficina;
 
/*
Modelo {código de modelo, tipo, peso, fabricante, horaTeste}
Fabricante {código, nome, telefone, email, responsavel }
*/
 
create table fabricante(
	codigo bigint primary key,
	nome varchar(100) not null,
	telefone varchar(30),
	email varchar(100) not null unique,
	responsavel varchar(100)
);
 
create table teste(lixo int);
drop table teste;
 
create table modelo(
	codigoModelo bigint primary key,
	tipo varchar(100) not null,
	peso decimal(12,4) default(1) ,
	codigofabricante bigint,
	horaTeste int default(100)
);
alter table modelo add foreign key
modelo(codigofabricante) references
fabricante(codigo);
 
alter table modelo add column obs text;
alter table modelo drop column obs;
 
create table maquina(
registro varchar(100) primary key,
ano char(4),
horasUso int default(0),
codigoModelo bigint);
 
alter table maquina add foreign key
maquina(codigoModelo) references  
modelo(codigoModelo);
 
 
create table oficina.oficina(
codigo int auto_increment primary key,
cnpj varchar(20),
nome varchar(100) not null,
responsavel varchar(100),
telefone varchar(30),
email varchar(100) unique not null 	
);
 
insert into oficina(cnpj, nome, responsavel, telefone, email)
values('234234234-54','RETIFICA FORTE','CHICO SILVA',
'3444-2344','CHICAO@bol.com.br');
select * from oficina;
 
create table oficina.tecnico(
codigo int auto_increment primary key,
codigoFuncional varchar(50),
nome varchar(100) not null,
email varchar(100) not null unique,
endereco varchar(100),
telefone varchar(100),
salario numeric(18,2),
qualificacao varchar(100) not null ,
codigoOficina int
)
alter table oficina.tecnico add foreign key
(codigoOficina) references oficina(codigo);
 
create table oficina.teste(
codigo bigint primary key auto_increment,
pontuacao int,
resultado text,
recomendacoes text,
codigoTecnico int,
codigoOficina int,
registroMaquina varchar(100));
 
alter table teste add foreign key (codigoTecnico)
references tecnico(codigo);
 
alter table teste add foreign key (codigoOficina)
references oficina(codigo);
 
alter table teste add foreign key (registroMaquina)
references maquina(registro);
 
 
create table tecnicoModelo(
	codigoTecnico int,
	codigoModelo bigint
);
alter table tecnicoModelo add foreign key (codigoTecnico)
references tecnico(codigo);
alter table tecnicoModelo add foreign key (codigoModelo)
references modelo(codigoModelo);
 
 
create table oficinaModelo(
	codigoOficina int,
	codigoModelo bigint
);
alter table oficinaModelo add foreign key (codigoOficina)
references oficina(codigo);
alter table oficinaModelo add foreign key (codigoModelo)
references modelo(codigoModelo);
